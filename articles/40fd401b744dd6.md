---
title: "mapã®key propsã«indexã¯ã‚¢ãƒ³ãƒãƒ‘ã‚¿ãƒ¼ãƒ³(React)"
emoji: "ğŸ‘Œ"
type: "tech" # tech: æŠ€è¡“è¨˜äº‹ / idea: ã‚¢ã‚¤ãƒ‡ã‚¢
topics: ["react","JavaScript"]
published: true
---

## map ã® key ã£ã¦ãªã«?

JavaScript ã® map()ã‚’ä½¿ç”¨ã—ã¦é…åˆ—ã‹ã‚‰ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‚’ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°ã™ã‚‹æ–¹æ³•ã¯ä¸‹è¨˜ã§å®Ÿè£…ã§ãã¾ã™ã€‚

```jsx
const people = ["john", "michel", "kim", "Andy"];

export default function List() {
  const listItems = people.map((person) => <li>{person}</li>);
  return <ul>{listItems}</ul>;
}
```

ä¸Šã®ã‚³ãƒ¼ãƒ‰ã‚’å®Ÿè¡Œã™ã‚‹ã¨ãƒªã‚¹ãƒˆãŒç”Ÿæˆã•ã‚Œã‚‹ã®ã§ã™ãŒã€ã‚³ãƒ³ã‚½ãƒ¼ãƒ«ã«ã¯ã€ä¸‹ã®ã‚¨ãƒ©ãƒ¼ãŒå‡ºã¾ã™ã€‚

`Warning: Each child in a list should have a unique "key" prop.`

ã‚¨ãƒ©ãƒ¼ã‚’è§£æ¶ˆã™ã‚‹ãŸã‚ã«ã¯ã€é…åˆ—ã«idã‚’æŒãŸã›ã€ãƒªã‚¹ãƒˆã®ã‚¢ã‚¤ãƒ†ãƒ ã«keyã¨ã—ã¦idã‚’æ¸¡ã›ã°ã„ã„ã§ã™ã€‚

```jsx
const people = [
  {
    id: 1,
    name: "john",
  },
  {
    id: 2,
    name: "michel",
  },
  {
    id: 3,
    name: "kim",
  },
  {
    id: 4,
    name: "Andy",
  },
];

export default function List() {
  const listItems = people.map((person) => (
    <li key={person.id}>{person.name}</li>
  ));
  return <ul>{listItems}</ul>;
}
```

## ãªãœkeyãŒå¿…è¦ãªã®ã‹

ãƒ‡ã‚¹ã‚¯ãƒˆãƒƒãƒ—ä¸Šã®ãƒ•ã‚¡ã‚¤ãƒ«ã«åå‰ãŒãªã„ã¨æƒ³åƒã—ã¦ãã ã•ã„ã€‚
ä»£ã‚ã‚Šã«ã€æœ€åˆã®ãƒ•ã‚¡ã‚¤ãƒ«ã€2 ç•ªç›®ã®ãƒ•ã‚¡ã‚¤ãƒ«ãªã©ã®é †åºã§å‚ç…§ã—ã¾ã™ã€‚
æ…£ã‚Œã‚‹ã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ãŒã€ä¸€åº¦ãƒ•ã‚¡ã‚¤ãƒ«ã‚’å‰Šé™¤ã™ã‚‹ã¨æ··ä¹±ã—ã¾ã™ã€‚
2 ç•ªç›®ã®ãƒ•ã‚¡ã‚¤ãƒ«ãŒ 1 ç•ªç›®ã®ãƒ•ã‚¡ã‚¤ãƒ«ã«ãªã‚Šã€3 ç•ªç›®ã®ãƒ•ã‚¡ã‚¤ãƒ«ãŒ 2 ç•ªç›®ã®ãƒ•ã‚¡ã‚¤ãƒ«ã«ãªã‚Šã€ä»¥é™ã‚‚åŒæ§˜ã§ã™ã€‚

ä¸Šè¨˜ã¨åŒæ§˜ã«mapã§ç”Ÿæˆã—ãŸãƒªã‚¹ãƒˆã®å†…å®¹ãŒå‰Šé™¤ã•ã‚ŒãŸã‚Šã€è¿½åŠ ã•ã‚ŒãŸã‚Šã™ã‚‹ã¨é †ç•ªãŒãšã‚Œã¦ãã¾ã™ã€‚

ã“ã®å•é¡Œã‚’èµ·ããªã„ã‚ˆã†ã«ã™ã‚‹ãŸã‚ã«ã€ãƒªã‚¹ãƒˆã®ã‚¢ã‚¤ãƒ†ãƒ ã«ä¸€æ„ã®IDã¨ã—ã¦keyã‚’ä¸ãˆã‚‹ã®ã§ã™ã€‚

https://robinpokorny.medium.com/index-as-a-key-is-an-anti-pattern-e0349aece318

## ãªãœindexãŒãƒ€ãƒ¡ãªã®ã‹

keyã®ã‚¨ãƒ©ãƒ¼ã‚’è§£é™¤ã™ã‚‹ãŸã‚ã«ä¸‹è¨˜ã®ã‚ˆã†ã«æ›¸ããŸããªã‚‹ã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ãŒã€å®Ÿã¯anti-patternã§ã™ã€‚
ãƒªã‚¹ãƒˆã®è¦ç´ ãŒå¢—ãˆã‚‹ãŸã³ã«å†ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°ãŒèµ°ã‚Šã€ãã®ãŸã³ã«indexã‚’å†ç”Ÿæˆã™ã‚‹ãŸã‚ã€ã‚¢ã‚¤ãƒ†ãƒ ã”ã¨ã«ä¸€æ„ã®idã¨ã„ã†è¨³ã«ã¯è¡Œã‹ãªããªã£ã¦ã—ã¾ã„ã¾ã™ã€‚

> è¦ç´ ã®ä¸¦ã³é †ãŒå¤‰æ›´ã•ã‚Œã‚‹å¯èƒ½æ€§ãŒã‚ã‚‹å ´åˆã€ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ã‚’ key ã¨ã—ã¦ä½¿ç”¨ã™ã‚‹ã“ã¨ã¯ãŠå‹§ã‚ã—ã¾ã›ã‚“ã€‚ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ã«æ‚ªã„å½±éŸ¿ã‚’ä¸ãˆã€ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®çŠ¶æ…‹ã«å•é¡Œã‚’èµ·ã“ã™å¯èƒ½æ€§ãŒã‚ã‚Šã¾ã™ã€‚
https://ja.reactjs.org/docs/lists-and-keys.html

```jsx
export default function List() {
  const listItems = people.map((person, index) => <li key={index}>{person}</li>);
  return <ul>{listItems}</ul>;
}
```

## ã˜ã‚ƒã‚ã©ã†ã™ã¹ãã‹
é…åˆ—ã®ä¸­ã®ä¸€æ„ã®ãƒ‡ãƒ¼ã‚¿ã‚’ä½¿ã„ã¾ã—ã‚‡ã†
ä¸€æ„ã®ãƒ‡ãƒ¼ã‚¿ã‚’ä½œæˆã—ã¾ã—ã‚‡ã†

### Keyã®ãƒ«ãƒ¼ãƒ«

- ã‚­ãƒ¼ã¯å…„å¼Ÿè¦ç´ é–“ã§ä¸€æ„ã§ãªã‘ã‚Œã°ãªã‚Šã¾ã›ã‚“ã€‚ãŸã ã—ã€ç•°ãªã‚‹é…åˆ—ã®JSX ãƒãƒ¼ãƒ‰ã«åŒã˜ã‚­ãƒ¼ã‚’ä½¿ç”¨ã—ã¦ã‚‚ã‹ã¾ã„ã¾ã›ã‚“ã€‚
- ã‚­ãƒ¼ã‚’å¤‰æ›´ã—ã¦ã¯ãªã‚Šã¾ã›ã‚“ã€‚å¤‰æ›´ã™ã‚‹ã¨ã€ã‚­ãƒ¼ã®ç›®çš„ãŒç„¡åŠ¹ã«ãªã‚Šã¾ã™ã€‚ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°ä¸­ã«ãã‚Œã‚‰ã‚’ç”Ÿæˆã—ãªã„ã§ãã ã•ã„ã€‚

## æœ€å¾Œã«
indexã‚’ä½¿ã£ã¦ã„ã‘ãªã„ã¨ã„ã†ã‚ã‘ã§ã¯ãªãã€ã€€é…åˆ—ã®å†…å®¹ãŒçµ¶å¯¾ã«å¤‰æ›´ã•ã‚Œãªã„ã“ã¨ã‚’ååˆ†ã«ç¢ºèªã—æœ€çµ‚æ‰‹æ®µã¨ã—ã¦ä½¿ã†ã“ã¨ãŒã§ãã¾ã™ã€‚

Reactã®å…¬å¼ã«ã‚‚æ›¸ã„ã¦ã‚ã‚Šã¾ã™ã€‚
> ãƒ¬ãƒ³ãƒ€ãƒ¼ã•ã‚Œã‚‹è¦ç´ ã«å®‰å®šã—ãŸ ID ãŒãªã„å ´åˆã€æœ€çµ‚æ‰‹æ®µã¨ã—ã¦é …ç›®ã®ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ã‚’ä½¿ã†ã“ã¨ãŒã§ãã¾ã™

ã¿ãªã•ã‚“ã‚‚ãƒã‚°ã®å‡ºãªã„ã‚³ãƒ¼ãƒ‰ã‚’æ›¸ãã¾ã—ã‚‡ã†

FYI
https://zenn.dev/luvmini511/articles/f7b22d93e9c182
